<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FHIR View – Sleep Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1 {
            margin-top: 0;
        }

        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border: 1px solid #ddd;
            overflow-x: auto;
            font-size: 0.9em;
        }

        .box {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 15px;
            background-color: #fafafa;
        }

        a {
            color: #0066cc;
        }
    </style>
</head>
<body>
    <h1>FHIR Bundle View</h1>

    <div class="box">
        <p>
            This page shows a single FHIR <strong>Bundle</strong> with:
        </p>
        <ul>
            <li><strong>Patient</strong> – Synthetic cancer patient (ID: patient-001)</li>
            <li><strong>Condition</strong> – Cancer diagnosis linked to the patient</li>
            <li><strong>Observation</strong> – One night of sleep as a FHIR Observation</li>
        </ul>
        <p>
            The Observation stores:
        </p>
        <ul>
            <li><strong>Date:</strong> {{ date }}</li>
            <li><strong>Total hours of sleep:</strong> {{ total_hours }}</li>
            <li><strong>Sleep quality label:</strong> {{ quality }}</li>
        </ul>
        <p>
            The full bundle is below. This is the same structure returned by
            <a href="/fhir/observation">/fhir/observation</a>, just shown here with spacing.
        </p>
    </div>

    <h2>Raw FHIR Bundle (JSON)</h2>
    <pre>{{ bundle | tojson(indent=2) }}</pre>

    <p>
        <a href="/dashboard">Back to dashboard</a>
    </p>
</body>
</html>